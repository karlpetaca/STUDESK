<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart - Studesk</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/product.css">
    <link rel="icon" href="images/studesk-icon.png" type="image/x-icon">    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
          font-family: Arial, sans-serif;
          background: #fafafa;
          margin: 0;
          padding: 0;
        }
        .cart-container {
          background: #fff;
          margin: 30px auto;
          padding: 20px;
          max-width: 95vw;
          box-shadow: 2px 2px 8px #ccc;
          border-radius: 4px;
        }
        .cart-item {
          display: flex;
          align-items: flex-start;
          gap: 30px;
          margin-bottom: 20px;
        }
        .item-image {
          position: relative;
          width: 120px;
          min-width: 120px;
          text-align: center;
        }
        .item-image img {
          width: 100px;
          height: 140px;
          object-fit: cover;
          border: 1px solid #ccc;
          border-radius: 2px;
        }
        .item-number {
          position: absolute;
          top: 0;
          left: 0;
          font-size: 14px;
          color: #333;
        }
        .item-details {
          flex: 1;
          display: flex;
          flex-direction: column;
          gap: 6px;
        }
        .item-details label {
          font-size: 13px;
          margin-top: 4px;
        }
        .item-details input[type="text"] {
          width: 200px;
          margin-bottom: 2px;
          padding: 2px 6px;
          font-size: 14px;
        }
        .quantity-controls {
          display: flex;
          align-items: center;
          gap: 8px;
          margin: 8px 0;
        }
        .qty-btn {
          width: 28px;
          height: 28px;
          font-size: 18px;
          background: #eee;
          border: 1px solid #bbb;
          border-radius: 2px;
          cursor: pointer;
        }
        .qty-btn:active {
          background: #ddd;
        }
        .total-price input[type="text"] {
          width: 70px;
          margin-left: 4px;
        }
        .item-actions {
          display: flex;
          flex-direction: column;
          gap: 10px;
          margin-left: 40px;
          margin-top: 20px;
        }
        .wishlist-btn, .remove-btn {
          padding: 6px 16px;
          border: 1px solid #888;
          background: #f8f8f8;
          cursor: pointer;
          border-radius: 2px;
          font-size: 14px;
        }
        .wishlist-btn:hover, .remove-btn:hover {
          background: #eee;
        }
        hr {
          margin: 20px 0 10px 0;
          border: none;
          border-top: 1px solid #ddd;
        }
        .cart-summary {
          display: flex;
          align-items: center;
          gap: 30px;
          margin-top: 10px;
        }
        .cart-summary label {
          font-size: 14px;
        }
        .cart-summary input[type="text"] {
          width: 40px;
          margin-left: 4px;
          font-size: 14px;
          padding: 2px 4px;
        }
        .shipping-info {
          margin-left: auto;
          font-size: 13px;
          color: #666;
        }
        .buy-btn {
          margin-left: 30px;
          padding: 12px 40px;
          background: #000;
          color: #fff;
          border: none;
          font-size: 18px;
          border-radius: 3px;
          cursor: pointer;
          transition: background 0.2s;
        }
        .buy-btn:hover {
          background: #222;
        }
        @media (max-width: 800px) {
          .cart-item {
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
          }
          .item-actions {
            margin-left: 0;
            margin-top: 10px;
            flex-direction: row;
            gap: 10px;
          }
          .cart-summary {
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
          }
          .buy-btn {
            margin-left: 0;
            width: 100%;
          }
        }
    </style>
</head>
<body>
  <header>
    <div class="header-container">
        <a href="landing.html"><img src="images/studesk.jpg" alt="Studesk Logo" class="logo"></a>
        <div class="search-container">
            <input type="text" placeholder="Search" class="search-bar" />
            <i class="fas fa-search search-icon"></i>
        </div>           
        <div class="icons">
          <a href="login.html" style="text-decoration: none;"><span class="icon"><i class="fas fa-user"></i></span></a>
            <a href="add-to-cart.html"><span class="icon"><i class="fas fa-shopping-cart"></i></span></a>
            <a href="wishlist.html"><span class="icon"><i class="fas fa-heart"></i></span></a>
        </div>
        <button class="navbar-toggle" aria-label="Toggle navigation menu">☰</button>
    </div>
    <nav class="nav-bar">
        <ul>
            <li class="dropdown" id="books-dropdown">
                <span class="dropdown-toggle" style="font-weight: 700; cursor: pointer; margin-left: 8px;">Books <i class="fas fa-caret-down"></i></span>
                <ul class="dropdown-menu menu-1">
                    <li>
                      <a href="fantasy.html"><p><strong>Fantasy</strong></p></a>
                    </li>
                    <!--Start-->
                    <li>
                      <a href="adventures.html"><p><strong>Action and Adventure</strong></p></a>
                    </li>

                    <li>
                      <a href="comedy.html"><p><strong>Comedy</strong></p></a>
                    </li>

                    <li>
                      <a href="drama.html"><p><strong>Drama</strong></p></a>
                    </li>

                    <li>
                      <a href="education.html"><p><strong>Education</strong></p></a>
                    </li>

                    <li>
                      <a href="history.html"><p><strong>History</strong></p></a>
                    </li>

                    <li>
                      <a href="mystery.html"><p><strong>Mystery</strong></p></a>
                    </li>

                    <li>
                      <a href="novels.html"><p><strong>Novels</strong></p></a>
                    </li>

                    <li>
                      <a href="romance.html"><p><strong>Romance</strong></p></a>
                    </li>

                    <li>
                      <a href="scifi.html"><p><strong>Sci - Fi</strong></p></a>
                    </li>
                    <!--End-->
                </ul>
            </li>
            <li><a href="new-arrivals.html">New Arrivals</a></li>
            <li><a href="best-sellers.html">Bestsellers</a></li>
            <li><a href="award-winning.html">Award-Winning</a></li>
            <li><a href="trending.html">Trending</a></li>
            <li><a href="school-supplies.html">School Supplies</a></li>
            <li><a href="authors.html">Authors</a></li>
        </ul>
    </nav>
</header>
    
    <main>
        <div class="cart-container">
            <h2>My Shopping Cart</h2>
            <div id="cart-items" class="cart-items"></div>
            <div class="cart-summary">
                <div class="cart-total">
                    <span>Total:</span>
                    <span id="total-amount">₱0.00</span>
                </div>
                <div class="shipping-info">
                    <p>Shipping: Free</p>
                    <p>Estimated delivery: 2-4 business days</p>
                </div>
                <button class="buy-btn" id="checkout-btn">Proceed to Checkout</button>
            </div>
        </div>
    </main>
    
    <footer>
        <div class="footer-content">
            <div>
                <h4>Company</h4>
                <a href="about.html">About us</a>
            </div>
            <div>
                <h4>Policies</h4>
                <a href="policy.html">Privacy Policies</a>
            </div>
            <div>
                <h4>Help</h4>
                <a href="payments.html">Payments</a>
            </div>
            <div>
                <h4>Misc</h4>
                <a href="sitemap.html">Sitemap</a>
            </div>
        </div>
        <p class="copyright">All rights reserved © Copyright</p>
    </footer>

    <script src="scripts/carousel.js"></script>
    <script src="scripts/cart.js"></script>
    <script src="scripts/toggle.js"></script>
    <script src="scripts/burger.js"></script>

    <script>
    document.addEventListener("DOMContentLoaded", () => {
        const cartItemsContainer = document.getElementById('cart-items');
        const totalAmountElement = document.getElementById('total-amount');
        const checkoutBtn = document.getElementById('checkout-btn');
        let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
        let total = 0;

        function updateCart() {
            cartItemsContainer.innerHTML = '';
            total = 0;

            if (cartItems.length === 0) {
                cartItemsContainer.innerHTML = '<p class="empty-cart">Your cart is empty</p>';
                totalAmountElement.textContent = '₱0.00';
                checkoutBtn.disabled = true;
                return;
            }

            cartItems.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.className = 'cart-item';
                itemElement.innerHTML = `
                    <div class="item-image">
                        <span class="item-number">${index + 1}</span>
                        <img src="${item.image}" alt="${item.title}">
                    </div>
                    <div class="item-details">
                        <h3>${item.title}</h3>
                        <p>${item.author}</p>
                        <p class="price">${item.price}</p>
                        <div class="quantity-controls">
                            <button class="qty-btn decrease" data-index="${index}">-</button>
                            <span class="quantity">${item.quantity}</span>
                            <button class="qty-btn increase" data-index="${index}">+</button>
                        </div>
                    </div>
                    <div class="item-actions">
                        <button class="wishlist-btn" data-index="${index}">Move to Wishlist</button>
                        <button class="remove-btn" data-index="${index}">Remove</button>
                    </div>
                `;
                cartItemsContainer.appendChild(itemElement);

                // Calculate total
                const price = parseFloat(item.price.replace('₱', '').replace(',', ''));
                total += price * item.quantity;
            });

            totalAmountElement.textContent = `₱${total.toFixed(2)}`;
            checkoutBtn.disabled = false;
        }

        // Handle quantity changes
        cartItemsContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('increase')) {
                const index = e.target.dataset.index;
                cartItems[index].quantity++;
                localStorage.setItem('cartItems', JSON.stringify(cartItems));
                updateCart();
            } else if (e.target.classList.contains('decrease')) {
                const index = e.target.dataset.index;
                if (cartItems[index].quantity > 1) {
                    cartItems[index].quantity--;
                    localStorage.setItem('cartItems', JSON.stringify(cartItems));
                    updateCart();
                }
            } else if (e.target.classList.contains('remove-btn')) {
                const index = e.target.dataset.index;
                cartItems.splice(index, 1);
                localStorage.setItem('cartItems', JSON.stringify(cartItems));
                updateCart();
            } else if (e.target.classList.contains('wishlist-btn')) {
                const index = e.target.dataset.index;
                const wishlistItems = JSON.parse(localStorage.getItem('wishlistItems')) || [];
                wishlistItems.push(cartItems[index]);
                localStorage.setItem('wishlistItems', JSON.stringify(wishlistItems));
                cartItems.splice(index, 1);
                localStorage.setItem('cartItems', JSON.stringify(cartItems));
                updateCart();
            }
        });

        // Handle checkout
        checkoutBtn.addEventListener('click', () => {
            if (cartItems.length > 0) {
                localStorage.setItem('orderDetails', JSON.stringify({
                    items: cartItems,
                    total: total,
                    date: new Date().toISOString()
                }));
                window.location.href = 'orders.html';
            }
        });

        // Initial cart update
        updateCart();
    });
    </script>
</body>
</html>